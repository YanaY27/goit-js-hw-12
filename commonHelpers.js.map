{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\n\nexport async function getPhotos(q, page) {\n  const API_KEY = '43325710-e7e524061030eee35d9931e23';\n  const baseUrl = 'https://pixabay.com/api';\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: '15',\n    page,\n  });\n\n  try {\n    const response = await fetch(`${baseUrl}/?${params}`);\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching photos:', error);\n    throw error;\n  }\n}\n\n\n\n\n// export function getPhotos(q, page) {\n//   const API_KEY = '43325710-e7e524061030eee35d9931e23';\n//   const baseUrl = 'https://pixabay.com/api';\n\n\n//   const params = new URLSearchParams({\n//     key: API_KEY,\n//     q,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: 'true',\n//     per_page: '15',\n//     page,\n//   });\n\n//   return fetch(`${baseUrl}/?${params}`).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     }\n//     return res.json();\n//   });\n// }\n","const loader = document.querySelector('.js-loader');\n\nexport function createGalleryMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-items\">      \n          <div class=\"gallery-item\">\n            <a  href=\"${largeImageURL}\">\n            <img  data-source=${largeImageURL} src=\"${webformatURL}\" alt=\"${tags}\" >\n           </a>\n          </div>\n          <div class=\"photo-info\">\n            <div>\n             <p class=\"photo-title\">Likes:</p> \n             <p class=\"photo-num\"> ${likes}</p>\n            </div>\n            <div>\n              <p class=\"photo-title\">Views:</p>\n              <p class=\"photo-num\"> ${views}</p>\n            </div>\n            <div>\n             <p class=\"photo-title\">Comments:</p>\n             <p class=\"photo-num\"> ${comments}</p>\n            </div>\n            <div>\n             <p class=\"photo-title\">Downloads:</p>\n             <p class=\"photo-num\"> ${downloads}</p>\n            </div>\n          </div>\n      </li>`\n    )\n    .join('');\n}\n\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nexport function hiddeLoader() {\n  loader.classList.add('is-hidden');\n}\n\n\n\n\n\n\n\n\n\n\n\n\n// export function displayImages(images) {\n//     const gallery = document.getElementById('gallery');\n//     gallery.innerHTML = '';\n  \n//     images.forEach(image => {\n//       const imgLink = document.createElement('a');\n//       imgLink.href = image.largeImageURL;\n  \n//       const imgElement = document.createElement('img');\n//       imgElement.src = image.webformatURL;\n//       imgElement.alt = image.tags;\n  \n//       imgLink.appendChild(imgElement);\n//       gallery.appendChild(imgLink);\n//     });\n  \n//     // Оновлення галереї SimpleLightbox\n//     const lightbox = new SimpleLightbox('.gallery a');\n//     lightbox.refresh();\n//   }","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nimport { getPhotos } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-function.js';\nimport { showLoader, hiddeLoader } from './js/render-function.js';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.js-form');\nconst loader = document.querySelector('.js-loader');\nconst loadBtn = document.querySelector('.btn-load-more');\n\nlet page = 1;\nlet imgPhoto = null;\nconst per_page = 15;\n\n\nform.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  imgPhoto = event.currentTarget.elements.search.value.trim();\n  showLoader();\n  loadBtn.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  page = 1;\n\n  if (!imgPhoto) {\n    gallery.innerHTML = '';\n    hiddeLoader();\n    event.target.reset();\n    return iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n      position: 'topRight',\n    });\n  }\n\n  try {\n    const data = await getPhotos(imgPhoto, page);\n    if (data.totalHits > 0) {\n      iziToast.success({\n        message: `We found ${data.totalHits} fotos!`,\n        position: 'topRight',\n      });\n    }\n\n    if (data.hits.length === 0) {\n      gallery.innerHTML = '';\n      event.target.reset();\n      return iziToast.error({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    }\n\n    gallery.innerHTML = createGalleryMarkup(data.hits);\n    if (data.totalHits > 15) {\n      loadBtn.classList.remove('is-hidden');\n    }\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hiddeLoader();\n    form.reset();\n  }\n}\n\n\n// then catch\n// function onSubmit(event) {\n//   event.preventDefault();\n//  imgPhoto = event.currentTarget.elements.search.value.trim();\n//   showLoader();\n//   loadBtn.classList.add('is-hidden');\n//   gallery.innerHTML = '';\n\n//   page = 1;\n\n//   if (!imgPhoto) {\n//     gallery.innerHTML = '';\n//     hiddeLoader();\n//     event.target.reset();\n//     return iziToast.error({\n//       message: `Sorry, there are no images matching your search query. Please try again!`,\n//       position: 'topRight',\n//     });\n//   }\n\n//   getPhotos(imgPhoto, page)\n//     .then(data => {\n//       if (data.totalHits > 0) {\n//         iziToast.success({\n//           message: `We found ${data.totalHits} fotos!`,\n//           position: 'topRight',\n//         });\n//       }\n\n//       if (data.hits.length === 0) {\n//         gallery.innerHTML = '';\n//         event.target.reset();\n//         return iziToast.error({\n//           message: `Sorry, there are no images matching your search query. Please try again!`,\n//           position: 'topRight',\n//         });\n//       }\n\n//       gallery.innerHTML = createGalleryMarkup(data.hits);\n//       if (data.totalHits > 15) {\n//         loadBtn.classList.remove('is-hidden');\n//       }\n//       lightbox.refresh();\n//     })\n//     .catch(error => {\n//       console.log(error);\n//     })\n//     .finally(() => {\n//       hiddeLoader();\n//     });\n//   form.reset();\n// }\n\nloadBtn.addEventListener('click', onClick);\n\nasync function onClick() {\n  page += 1;\n\n  try {\n    const data = await getPhotos(imgPhoto, page);\n    gallery.insertAdjacentHTML('beforeEnd', createGalleryMarkup(data.hits));\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPages = Math.ceil(data.totalHits / per_page);\n    if (lastPages === page) {\n      loadBtn.classList.add('is-hidden');\n      iziToast.info({\n        message: `That's all!`,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n// then catch\n// function onClick() {\n//   page += 1;\n\n//   getPhotos(imgPhoto, page).then(data => {\n//     gallery.insertAdjacentHTML('beforeEnd', createGalleryMarkup(data.hits));\n\n//     const { height: cardHeight } = document\n//       .querySelector('.gallery')\n//       .firstElementChild.getBoundingClientRect();\n\n//     window.scrollBy({\n//       top: cardHeight * 2,\n//       behavior: 'smooth',\n//     });\n\n//     const lastPages = Math.ceil(data.totalHits / per_page);\n//     if (lastPages === page) {\n//       loadBtn.classList.add('is-hidden');\n//       iziToast.info({\n//         message: `That's all!`,\n//         position: 'topRight',\n//       });\n//     }\n//   });\n// }\n"],"names":["getPhotos","q","page","API_KEY","baseUrl","params","response","error","loader","createGalleryMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hiddeLoader","lightbox","SimpleLightbox","gallery","form","loadBtn","imgPhoto","per_page","onSubmit","event","iziToast","data","onClick","cardHeight"],"mappings":"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"}